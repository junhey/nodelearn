!function(){function n(){return z.appendTo("body").show()}function e(){return z.hide()}function t(n){n.find(".jquery-layer-close-evt").on("click",function(){r(n)}),$(window).on("resize",function(){i(n)})}function r(n){n.remove(),e()}function i(n){n.css({marginLeft:-n.outerWidth()/2,marginTop:-n.outerHeight()/2})}function o(e,r){return e=$(e).appendTo("body"),e.find(".jquery-layer-close").focus(),r.call(null,e),n(),i(e),t(e),e}function c(n,e,t){var r='<div class="#{z} zoomIn" style="width:#{width}; height:#{height};"><form>';return r+=n,r+=e,r+=t,r+="</form></div>"}function a(){return'<div class="#{z}-title noselect"><span class="#{z}-h2">#{title}</span><a href="#{j}" class="#{z}-close #{z}-close-evt"></a></div>'}function u(n){var e='<div class="#{z}-bar #{z}-noselect #{z}-zoom">';return $(n).each(function(n,t){e+='<a href="#{j}" class="#{z}-btn-'+n+' #{z}-btn #{z}-ml10 #{z}-fr">'+t+"</a>"}),e+="<div>"}function l(){return'<div class="#{z}-nav">#{content}</div>'}function f(n){return $.extend(n,{j:"javascript:;",z:"jquery-layer"})}function s(n){return p.text(n).appendTo("body").show(),i(p),clearTimeout(j),j=setTimeout(function(){p.fadeOut()},3e3),p}function d(n,e){return h({title:"确认框",content:n,btns:["确定","取消"],callback:function(n){n("取消",function(n,e){n()}),n("确定",function(n,t){e(),n()})}}).find(".jquery-layer-btn-0").focus().addClass("jquery-layer-btn-blue").end()}function y(n){return h({title:"确认框",content:n,btns:["确定"],callback:function(n){n("确定",function(n,e){n()})}}).find(".jquery-layer-btn-0").addClass("jquery-layer-btn-blue").end()}function b(n){n.content='<iframe src="'+n.url+'" class="layer-loading" frameborder="no" width="100%" border="0">';var e=h(n).find(".jquery-layer-btn-0").addClass("jquery-layer-btn-blue").end();return e.find("iframe").height(e.outerHeight()-73),e}function v(n){var e;return n.btns=["提交"],n.callback=function(t){t("提交",function(t,r,i){if(n.beforeSubmit){var o=n.beforeSubmit.call(e,r,i);if(o===!1)return}$.post(n.postUrl,r,function(e){n.postSuccess&&n.postSuccess.call(null,t,e)})})},n.getUrl?$.get(n.getUrl,function(t){n.content=m(n.content,t),e=h(n).find(".jquery-layer-btn-0").focus().addClass("jquery-layer-btn-blue").end()}):(n.content=m(n.content,{}),e=h(n).find(".jquery-layer-btn-0").focus().addClass("jquery-layer-btn-blue").end()),e}function h(n){var e={},t=c(a(),l(),u(n.btns));return t=m(t,f(n)),t=o(t,function(n){var t=n.find("form");n.find(".jquery-layer-btn").on("click",function(){var i=e[$(this).text()];"function"==typeof i&&i.call(n,function(){r(n)},t.serialize(),t.serializeArray())})}),n.callback&&n.callback.call(this,function(n,t){e[n]=t}),t}function m(n,e){return n.replace(/#\{([\s\S]+?)\}/g,function(n,t){return e[t]||""})}var j,z=$('<div class="jquery-layer-mask"></div>'),p=$('<div class="jquery-layer-tip zoomIn"></div>');$.extend({layer:{mask:n,hideMask:e,tip:s,box:h,confirm:d,alert:y,iframe:b,form:v}})}();